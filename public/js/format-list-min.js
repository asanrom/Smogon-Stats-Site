function loadFormatsCards(){window.formatsCards=[];for(var t=$(".format-card"),o=0;o<t.length;o++){var a=(t[o].id+"").split("-"),r=a[0]+"",s=parseInt(a[1]),e=parseInt(a[2]),n=$("#"+t[o].id).children(".mdl-card__title").first().children(".format-card-title").first().html();formatsCards.push({el:$("#"+t[o].id),format:r,baseline:s,total:e,found:-1,title:n})}}function sortFormats(){formatCardsOptions.sortedAlphabetically?window.formatsCards=formatsCards.sort(function(t,o){return t.format.localeCompare(o.format)||(t.baseline>o.baseline?-1:1)}):window.formatsCards=formatsCards.sort(function(t,o){return t.total>o.total?-1:t.total<o.total?1:t.format.localeCompare(o.format)||(t.baseline>o.baseline?-1:1)})}function searchInFormats(){var t=(formatCardsOptions.filter+"").toLowerCase().replace(/[^a-z0-9]+/g,"");if(t){for(r=0;r<formatsCards.length;r++){formatsCards[r].found=formatsCards[r].format.indexOf(t);var o="",a=findText(formatsCards[r].title,t);o=a?formatsCards[r].title.substr(0,a.pos)+'<span class="filter-match">'+formatsCards[r].title.substr(a.pos,a.length)+"</span>"+formatsCards[r].title.substr(a.pos+a.length):formatsCards[r].title,formatsCards[r].el.children(".mdl-card__title").first().children(".format-card-title").first().html(o)}formatCardsOptions.sortedAlphabetically?window.formatsCards=formatsCards.sort(function(t,o){return t.found<o.found?-1:t.found>o.found?1:t.format.localeCompare(o.format)||(t.baseline>o.baseline?-1:1)}):window.formatsCards=formatsCards.sort(function(t,o){return t.found<o.found?-1:t.found>o.found?1:t.total>o.total?-1:t.total<o.total?1:t.format.localeCompare(o.format)||(t.baseline>o.baseline?-1:1)})}else{for(var r=0;r<formatsCards.length;r++)formatsCards[r].el.children(".mdl-card__title").first().children(".format-card-title").first().html(formatsCards[r].title);sortFormats()}}function updateFormatsCards(){if(formatCardsOptions.filter)for(var t=0;t<formatsCards.length;t++)formatCardsOptions.showOnlyTopBaselines&&formatsCards[t].baseline<=1500?formatsCards[t].el.detach():formatsCards[t].found<0?formatsCards[t].el.detach():formatsCards[t].el.detach().appendTo("#format-cards-container");else for(t=0;t<formatsCards.length;t++)formatCardsOptions.showOnlyTopBaselines&&formatsCards[t].baseline<=1500?formatsCards[t].el.detach():formatsCards[t].el.detach().appendTo("#format-cards-container")}function findText(t,o){for(var a=o.length;a<=t.length;){for(var r=0;r<=t.length-a;r++){if(t.substr(r,a).toLowerCase().replace(/[^a-z0-9]+/g,"")===o)return{pos:r,length:a}}a++}return null}window.formatsCards=[],$(document).ready(function(){window.formatCardsOptions={sortedAlphabetically:!$("#option-sort-total").prop("checked"),sortedByTotal:!!$("#option-sort-total").prop("checked"),showOnlyTopBaselines:!!$("#check-only-top").prop("checked"),filter:""},$("#input-text-search").on("change",function(t){formatCardsOptions.filter=$("#input-text-search").prop("value"),searchInFormats(),updateFormatsCards()}),$("#check-only-top").on("change",function(t){formatCardsOptions.showOnlyTopBaselines=!!$("#check-only-top").prop("checked"),formatCardsOptions.showOnlyTopBaselines?document.cookie="onlytop=yes; path=/;":document.cookie="onlytop=no; path=/;",updateFormatsCards()}),$("#option-sort-total").on("change",function(t){formatCardsOptions.sortedAlphabetically=!$("#option-sort-total").prop("checked"),formatCardsOptions.sortedByTotal=!formatCardsOptions.sortedAlphabetically,formatCardsOptions.sortedAlphabetically?document.cookie="sorted=abc; path=/;":document.cookie="sorted=total; path=/;",formatCardsOptions.filter?searchInFormats():sortFormats(),updateFormatsCards()}),$("#option-sort-abc").on("change",function(t){formatCardsOptions.sortedAlphabetically=!!$("#option-sort-abc").prop("checked"),formatCardsOptions.sortedByTotal=!formatCardsOptions.sortedAlphabetically,formatCardsOptions.sortedAlphabetically?document.cookie="sorted=abc; path=/;":document.cookie="sorted=total; path=/;",formatCardsOptions.filter?searchInFormats():sortFormats(),updateFormatsCards()}),loadFormatsCards(),sortFormats(),updateFormatsCards()});